# AI-Powered Treatment Plan Assistant
## MVP Plan - Simple, Lovable, Complete (SLC)

---

## Executive Summary

This MVP focuses on delivering the **core value proposition** of AI-powered treatment plan generation with safety checks in a **simple, lovable, and complete** package. The MVP enables doctors to input patient data, receive AI-generated treatment recommendations with risk assessments, and approve/modify plans through an intuitive wizard interface.

**Target Timeline**: 4-6 weeks for MVP completion  
**Target Users**: Primary Care Physicians, General Practitioners  
**Core Technology**: Next.js 16, OpenAI API (GPT-4) or Google Gemini, Supabase, Prisma

---

## 1. SLC Framework Analysis

### Simple ğŸ¯
**What we're cutting for MVP:**
- âŒ Advanced pattern learning from historical data (future enhancement)
- âŒ Real-time collaboration features
- âŒ Advanced analytics and reporting dashboards
- âŒ Mobile application
- âŒ EHR system integrations
- âŒ Multiple user roles (focus on doctors only)
- âŒ Complex drug interaction database (use AI knowledge + basic validation)
- âŒ Automated notifications and reminders
- âŒ Audit trail and compliance reporting
- âŒ Multi-language support

**What we're keeping:**
- âœ… Core 4-step wizard (Intake â†’ Analysis â†’ Review â†’ Summary)
- âœ… AI-powered treatment recommendations
- âœ… Risk scoring (Low, Medium, High)
- âœ… Basic drug interaction warnings
- âœ… Doctor approval/modification workflow
- âœ… Patient record storage
- âœ… Authentication (simple email/password)

### Lovable â¤ï¸
**What makes this MVP lovable:**
1. **Instant Value**: Doctors get AI-powered recommendations in seconds
2. **Beautiful UI**: Clean, modern interface using shadcn/ui components
3. **Risk-First Display**: Critical safety information is impossible to miss
4. **Smooth Workflow**: Intuitive 4-step wizard that feels natural
5. **Confidence Building**: Clear explanations and rationale for every recommendation
6. **Edit Freedom**: Doctors maintain full control to modify AI suggestions
7. **Zero Friction**: No complex onboarding, just sign up and start

**Delight Factors:**
- Skeleton loading states during AI processing
- Smooth transitions between wizard steps
- Color-coded risk badges that are instantly recognizable
- One-click approval for straightforward cases
- Inline editing for quick modifications

### Complete âœ…
**MVP is complete when a doctor can:**
1. âœ… Sign up and log in securely
2. âœ… Create a new patient record with medical history
3. âœ… Input current symptoms and conditions
4. âœ… Receive AI-generated treatment recommendations
5. âœ… See risk scores and drug interaction warnings
6. âœ… View alternative treatment options
7. âœ… Modify medications, dosages, or durations
8. âœ… Approve and finalize treatment plans
9. âœ… View treatment plan summary
10. âœ… Access previously created patient records and plans

**Success Criteria:**
- Doctor can complete full workflow in under 5 minutes
- AI recommendations are medically sound (validated by medical professionals)
- Critical drug interactions are flagged 100% of the time
- UI is intuitive (requires no training/documentation)
- System is secure and HIPAA-aware (data encryption, secure storage)

---

## 2. Functional Requirements

### 2.1 User Authentication & Authorization

#### FR-AUTH-001: User Registration
- **Priority**: P0 (Critical)
- **Description**: Doctors can create an account with email and password
- **Acceptance Criteria**:
  - Email validation (valid format, unique)
  - Password requirements (min 8 chars, 1 uppercase, 1 number)
  - Email verification (send confirmation email)
  - Store user credentials securely (hashed passwords)
- **Technical Notes**: Use Next-Auth with Credentials provider

#### FR-AUTH-002: User Login
- **Priority**: P0 (Critical)
- **Description**: Doctors can log in with email and password
- **Acceptance Criteria**:
  - Successful login redirects to dashboard
  - Failed login shows clear error message
  - Session persists across page refreshes
  - "Remember me" functionality (optional)
- **Technical Notes**: Next-Auth session management

#### FR-AUTH-003: User Logout
- **Priority**: P0 (Critical)
- **Description**: Doctors can securely log out
- **Acceptance Criteria**:
  - Logout clears session completely
  - Redirects to login page
  - Cannot access protected routes after logout

### 2.2 Patient Management

#### FR-PAT-001: Create Patient Record
- **Priority**: P0 (Critical)
- **Description**: Doctor can create a new patient record
- **Acceptance Criteria**:
  - Required fields: Name, Date of Birth, Gender
  - Optional fields: Medical History, Current Medications, Allergies, Chronic Conditions
  - Form validation for all fields
  - Patient record associated with logged-in doctor
  - Success confirmation after creation
- **Data Model**:
  ```typescript
  Patient {
    id: string
    doctorId: string
    name: string
    dateOfBirth: Date
    gender: enum (Male, Female, Other)
    medicalHistory: string (optional)
    currentMedications: string[] (optional)
    allergies: string[] (optional)
    chronicConditions: string[] (optional)
    createdAt: Date
    updatedAt: Date
  }
  ```

#### FR-PAT-002: View Patient List
- **Priority**: P0 (Critical)
- **Description**: Doctor can view list of their patients
- **Acceptance Criteria**:
  - Display all patients created by logged-in doctor
  - Show key info: Name, Age, Last Visit
  - Search functionality by patient name
  - Sortable by name or last visit date
  - Click patient to view details

#### FR-PAT-003: View Patient Details
- **Priority**: P0 (Critical)
- **Description**: Doctor can view detailed patient information
- **Acceptance Criteria**:
  - Display all patient information
  - Show list of previous treatment plans
  - Button to create new treatment plan
  - Edit patient information (stretch goal for MVP)

### 2.3 Treatment Plan Generation (Core Feature)

#### FR-TREAT-001: Initiate Treatment Plan Wizard
- **Priority**: P0 (Critical)
- **Description**: Doctor starts treatment plan creation workflow
- **Acceptance Criteria**:
  - Select existing patient or create new one
  - Clear indication of wizard steps (1 of 4, 2 of 4, etc.)
  - Can navigate back to previous steps
  - Progress is saved if user navigates away

#### FR-TREAT-002: Step 1 - Patient Intake
- **Priority**: P0 (Critical)
- **Description**: Doctor inputs current patient condition and symptoms
- **Acceptance Criteria**:
  - Required fields: Chief Complaint, Current Symptoms
  - Optional fields: Vital Signs (BP, HR, Temp, etc.), Physical Exam Notes
  - Auto-populate known allergies and current medications
  - Clear "Next" button to proceed
- **Data Captured**:
  ```typescript
  Intake {
    chiefComplaint: string (required)
    currentSymptoms: string (required)
    vitalSigns: {
      bloodPressure: string
      heartRate: number
      temperature: number
      weight: number
    } (optional)
    physicalExamNotes: string (optional)
  }
  ```

#### FR-TREAT-003: Step 2 - AI Analysis & Generation
- **Priority**: P0 (Critical)
- **Description**: System generates AI-powered treatment recommendations
- **Acceptance Criteria**:
  - Display loading state during AI processing
  - Call OpenAI/Gemini API with patient data
  - Parse AI response into structured format
  - Generate risk scores for recommendations
  - Flag potential drug interactions
  - Provide alternative treatment options
  - Show confidence scores per recommendation
- **AI Prompt Structure**:
  ```
  You are a medical AI assistant. Based on the following patient information:
  
  Patient Details:
  - Age: [age]
  - Gender: [gender]
  - Medical History: [history]
  - Current Medications: [medications]
  - Allergies: [allergies]
  - Chronic Conditions: [conditions]
  
  Current Presentation:
  - Chief Complaint: [complaint]
  - Symptoms: [symptoms]
  - Vital Signs: [vitals]
  
  Provide a treatment plan in JSON format with:
  1. Recommended medications (name, dosage, duration, route)
  2. Risk assessment (Low/Medium/High) with justification
  3. Potential drug interactions or contraindications
  4. Alternative treatment options
  5. Rationale for each recommendation
  6. Confidence score (0-100) for each recommendation
  
  Return response as JSON schema: [schema]
  ```
- **Response Format**:
  ```typescript
  AIResponse {
    treatmentPlan: {
      medications: [
        {
          name: string
          genericName: string
          dosage: string
          frequency: string
          duration: string
          route: string (oral, IV, topical, etc.)
          instructions: string
          confidenceScore: number (0-100)
        }
      ]
      riskAssessment: {
        overallRisk: enum (Low, Medium, High)
        riskFactors: string[]
        justification: string
      }
      drugInteractions: [
        {
          medication1: string
          medication2: string
          severity: enum (Mild, Moderate, Severe)
          description: string
          recommendation: string
        }
      ]
      contraindications: [
        {
          medication: string
          reason: string
          severity: enum (Absolute, Relative)
        }
      ]
      alternatives: [
        {
          medications: [...]
          rationale: string
          riskLevel: enum (Low, Medium, High)
        }
      ]
      rationale: string
      recommendations: string[]
    }
  }
  ```

#### FR-TREAT-004: Step 3 - Doctor Review & Edit
- **Priority**: P0 (Critical)
- **Description**: Doctor reviews AI recommendations and can modify
- **Acceptance Criteria**:
  - Display all AI recommendations in clear, organized layout
  - **Risk-first display**: Critical warnings at top, prominent
  - Show risk score with color-coded badges
  - Display drug interactions with severity indicators
  - Show alternative treatment options
  - Allow inline editing of:
    - Medication name
    - Dosage
    - Duration
    - Frequency
    - Instructions
  - Add/remove medications
  - View detailed rationale for each recommendation
  - Three action buttons: Approve, Modify, Reject
  - If modifications made, show diff/changes clearly
  - Require confirmation for high-risk approvals

#### FR-TREAT-005: Step 4 - Final Summary & Approval
- **Priority**: P0 (Critical)
- **Description**: Display final treatment plan for approval
- **Acceptance Criteria**:
  - Show complete treatment plan (original or modified)
  - Display final risk assessment
  - Show any warnings/interactions clearly
  - Require explicit doctor confirmation
  - Timestamp and doctor attribution
  - Generate structured JSON output
  - Option to print/export summary
  - "Finalize" button to save treatment plan

#### FR-TREAT-006: Save Treatment Plan
- **Priority**: P0 (Critical)
- **Description**: Save finalized treatment plan to database
- **Acceptance Criteria**:
  - Store complete treatment plan
  - Associate with patient and doctor
  - Record timestamp of creation and approval
  - Store both original AI recommendations and final approved plan
  - Success confirmation with option to view summary
- **Data Model**:
  ```typescript
  TreatmentPlan {
    id: string
    patientId: string
    doctorId: string
    intakeData: JSON (step 1 data)
    aiRecommendations: JSON (original AI output)
    finalPlan: JSON (approved/modified plan)
    riskAssessment: {
      level: enum (Low, Medium, High)
      factors: string[]
      justification: string
    }
    drugInteractions: JSON[]
    alternatives: JSON[]
    status: enum (Draft, Approved, Rejected)
    wasModified: boolean
    modificationNotes: string (optional)
    createdAt: Date
    approvedAt: Date
  }
  ```

### 2.4 Treatment Plan Management

#### FR-TREAT-007: View Treatment Plan History
- **Priority**: P1 (Important)
- **Description**: Doctor can view past treatment plans for a patient
- **Acceptance Criteria**:
  - Display list of all treatment plans for selected patient
  - Show key info: Date, Diagnosis, Risk Level, Status
  - Click to view full treatment plan details
  - Most recent plans at top

#### FR-TREAT-008: View Treatment Plan Details
- **Priority**: P1 (Important)
- **Description**: View complete details of a treatment plan
- **Acceptance Criteria**:
  - Display all plan information in organized format
  - Show original AI recommendations
  - Show final approved plan
  - Indicate if plan was modified
  - Display risk assessment and warnings
  - Timestamp and doctor attribution
  - Option to print/export

### 2.5 Dashboard

#### FR-DASH-001: Doctor Dashboard
- **Priority**: P1 (Important)
- **Description**: Landing page after login showing overview
- **Acceptance Criteria**:
  - Welcome message with doctor name
  - Quick stats: Total patients, Recent plans
  - Recent patients list (last 5)
  - Quick action: "Create New Treatment Plan" button
  - Navigation to Patients, Treatment Plans, Profile

---

## 3. Non-Functional Requirements

### 3.1 Performance

#### NFR-PERF-001: Page Load Time
- **Requirement**: All pages should load within 2 seconds on standard broadband
- **Priority**: P0 (Critical)
- **Measurement**: Lighthouse Performance Score > 90

#### NFR-PERF-002: AI Response Time
- **Requirement**: AI treatment recommendations generated within 10 seconds
- **Priority**: P0 (Critical)
- **Mitigation**: Show engaging loading state, streaming responses if possible

#### NFR-PERF-003: Database Query Performance
- **Requirement**: All database queries complete within 500ms
- **Priority**: P1 (Important)
- **Implementation**: Proper indexing on frequently queried fields

### 3.2 Security

#### NFR-SEC-001: Data Encryption
- **Requirement**: All sensitive patient data encrypted at rest and in transit
- **Priority**: P0 (Critical)
- **Implementation**: 
  - HTTPS/TLS for all connections
  - Database encryption via Supabase
  - Encrypted environment variables

#### NFR-SEC-002: Authentication Security
- **Requirement**: Secure authentication with industry best practices
- **Priority**: P0 (Critical)
- **Implementation**:
  - Password hashing (bcrypt/argon2)
  - Session tokens with expiration
  - CSRF protection
  - Rate limiting on auth endpoints

#### NFR-SEC-003: Authorization
- **Requirement**: Users can only access their own data
- **Priority**: P0 (Critical)
- **Implementation**:
  - Row-level security in database
  - Server-side authorization checks
  - Validate user ownership on all data operations

#### NFR-SEC-004: API Key Security
- **Requirement**: OpenAI/Gemini API keys securely stored
- **Priority**: P0 (Critical)
- **Implementation**:
  - Environment variables (never in code)
  - Server-side API calls only
  - Never expose keys to client

#### NFR-SEC-005: HIPAA Awareness
- **Requirement**: Follow HIPAA best practices for handling PHI
- **Priority**: P0 (Critical)
- **Implementation**:
  - Audit logging of data access (future)
  - Secure data storage
  - Access controls
  - Note: Full HIPAA compliance requires additional infrastructure

### 3.3 Usability

#### NFR-USE-001: Intuitive Interface
- **Requirement**: Doctors can complete workflow without training
- **Priority**: P0 (Critical)
- **Measurement**: User testing shows 90%+ task completion without help

#### NFR-USE-002: Mobile Responsive
- **Requirement**: Interface works on tablets and mobile devices
- **Priority**: P1 (Important)
- **Implementation**: Responsive design with Tailwind CSS breakpoints

#### NFR-USE-003: Accessibility
- **Requirement**: WCAG 2.1 Level AA compliance
- **Priority**: P1 (Important)
- **Implementation**:
  - Semantic HTML
  - Keyboard navigation
  - Screen reader support
  - Sufficient color contrast
  - Focus indicators

### 3.4 Reliability

#### NFR-REL-001: Uptime
- **Requirement**: 99% uptime during business hours
- **Priority**: P1 (Important)
- **Implementation**: Use reliable hosting (Vercel), monitor with uptime service

#### NFR-REL-002: Error Handling
- **Requirement**: Graceful error handling with user-friendly messages
- **Priority**: P0 (Critical)
- **Implementation**:
  - Try-catch blocks on all async operations
  - User-friendly error messages
  - Error logging for debugging
  - Fallback UI for API failures

#### NFR-REL-003: Data Backup
- **Requirement**: Daily automated backups
- **Priority**: P0 (Critical)
- **Implementation**: Supabase automated backups, point-in-time recovery

### 3.5 Scalability

#### NFR-SCALE-001: Concurrent Users
- **Requirement**: Support 100+ concurrent users initially
- **Priority**: P1 (Important)
- **Implementation**: Serverless architecture via Vercel Edge

#### NFR-SCALE-002: Database Growth
- **Requirement**: Handle 10,000+ patient records and 50,000+ treatment plans
- **Priority**: P1 (Important)
- **Implementation**: PostgreSQL with proper indexing

### 3.6 Maintainability

#### NFR-MAINT-001: Code Quality
- **Requirement**: Maintainable, well-documented codebase
- **Priority**: P1 (Important)
- **Implementation**:
  - TypeScript for type safety
  - ESLint for code standards
  - Component documentation
  - Clear folder structure (four-layer architecture)

#### NFR-MAINT-002: Testing
- **Requirement**: Critical paths have automated tests
- **Priority**: P2 (Nice to have for MVP)
- **Implementation**: Jest + React Testing Library (future)

---

## 4. User Definitions

### 4.1 Primary User: Doctor (Physician)

#### User Persona: Dr. Sarah Chen
- **Role**: Primary Care Physician
- **Age**: 35-50
- **Experience**: 5-15 years in practice
- **Tech Savviness**: Moderate (comfortable with basic software, not a power user)
- **Workload**: Sees 20-30 patients per day
- **Pain Points**:
  - Time pressure (limited time per patient)
  - Concern about medication errors
  - Needs to consider drug interactions
  - Wants to provide best care while managing risk
  - Tired of clunky medical software

#### Goals & Motivations
- **Primary Goal**: Provide safe, effective treatment recommendations quickly
- **Secondary Goals**:
  - Reduce risk of medical errors
  - Save time on research and documentation
  - Stay current with treatment best practices
  - Maintain detailed patient records
- **Success Metrics**:
  - Can generate treatment plan in under 5 minutes
  - Feels confident in AI recommendations
  - Reduced anxiety about drug interactions
  - Less time on administrative tasks

#### User Journey
1. **Discovery**: Hears about AI assistant from colleague/conference
2. **Sign-up**: Creates account during lunch break
3. **First Use**: Tries with a straightforward case
4. **Adoption**: If positive experience, uses for most patients
5. **Advocacy**: Recommends to colleagues if valuable

#### Technical Context
- **Devices**: Desktop computer in office, occasionally tablet
- **Environment**: Clinical setting, often interrupted
- **Time Constraints**: 10-15 minutes per patient total
- **Internet**: Reliable broadband connection

---

## 5. User Flows

### 5.1 Core User Flow: Create Treatment Plan (Happy Path)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     START: Doctor Dashboard                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Select or Create Patient                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ Search for existing patient by name                â”‚  â”‚
â”‚  â”‚ â€¢ Select patient from list                           â”‚  â”‚
â”‚  â”‚   OR                                                  â”‚  â”‚
â”‚  â”‚ â€¢ Click "New Patient"                                â”‚  â”‚
â”‚  â”‚ â€¢ Fill in patient details (Name, DOB, Gender, etc.)  â”‚  â”‚
â”‚  â”‚ â€¢ Submit patient form                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  [Cancel] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Next: Intake] â”€â”€â”€â”â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                               â”‚
                              â†“                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Step 2: Patient Intake - Current Condition                â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ System auto-populates known info:                    â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Patient name, age, gender                          â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Known allergies (highlighted in red)               â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Current medications (if any)                       â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Chronic conditions                                 â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Doctor inputs:                                       â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Chief Complaint (text area) *required              â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Current Symptoms (text area) *required             â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Vital Signs (optional):                            â”‚ â”‚â”‚
â”‚  â”‚   - Blood Pressure                                   â”‚ â”‚â”‚
â”‚  â”‚   - Heart Rate                                       â”‚ â”‚â”‚
â”‚  â”‚   - Temperature                                      â”‚ â”‚â”‚
â”‚  â”‚   - Weight                                           â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Physical Exam Notes (optional)                     â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  [Back] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Generate Plan] â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                               â”‚
                              â†“                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Step 3: AI Analysis (Loading State)                       â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  ğŸ¤– AI is analyzing patient data...                  â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 40%                   â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚  âœ“ Patient data processed                            â”‚ â”‚â”‚
â”‚  â”‚  âœ“ Medical history reviewed                          â”‚ â”‚â”‚
â”‚  â”‚  â³ Generating treatment recommendations...          â”‚ â”‚â”‚
â”‚  â”‚  â³ Analyzing drug interactions...                   â”‚ â”‚â”‚
â”‚  â”‚  â³ Calculating risk scores...                       â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚  Estimated time: 8 seconds                           â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  (No user action, automatic progression)                   â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                               â”‚
                              â†“                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Step 4: Review AI Recommendations                         â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ ğŸš¨ CRITICAL WARNINGS (if any) - Red alert box        â”‚ â”‚â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚â”‚
â”‚  â”‚ âš ï¸  High Risk Drug Interaction Detected              â”‚ â”‚â”‚
â”‚  â”‚     Medication A + Current Med B                     â”‚ â”‚â”‚
â”‚  â”‚     Severity: Severe                                 â”‚ â”‚â”‚
â”‚  â”‚     [View Details] [See Alternatives]                â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ RISK ASSESSMENT                                      â”‚ â”‚â”‚
â”‚  â”‚ Overall Risk: [Medium] ğŸŸ¡                            â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Risk Factors:                                        â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Patient has hypertension                           â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Concurrent medication B                            â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Confidence Score: 87%                                â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ RECOMMENDED TREATMENT PLAN                           â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Medication 1: Amoxicillin          [Edit] [Remove]  â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Dosage: 500mg                                      â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Frequency: 3 times daily                           â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Duration: 7 days                                   â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Route: Oral                                        â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Instructions: Take with food                       â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Rationale: First-line treatment for bacterial...   â”‚ â”‚â”‚
â”‚  â”‚   [Show Full Rationale]                              â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ [+ Add Another Medication]                           â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ ALTERNATIVE TREATMENT OPTIONS                        â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Alternative 1: [Low Risk] ğŸŸ¢                         â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Medication X (dosage, duration)                    â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Rationale: Suitable for patients with...          â”‚ â”‚â”‚
â”‚  â”‚ [Use This Alternative]                               â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Alternative 2: [Medium Risk] ğŸŸ¡                      â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Medication Y (dosage, duration)                    â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Rationale: More aggressive treatment...            â”‚ â”‚â”‚
â”‚  â”‚ [Use This Alternative]                               â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  Decision Actions:                                         â”‚â”‚
â”‚  [Back to Intake] [Reject Plan] [Modify] [Approve] â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                               â”‚
                              â†“                                â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
     â”‚                                                  â”‚      â”‚
  [Approve]                                        [Modify]    â”‚
     â”‚                                                  â”‚      â”‚
     â†“                                                  â†“      â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                                          â”‚ Inline editing   â”‚â”‚
                                          â”‚ â€¢ Edit any field â”‚â”‚
                                          â”‚ â€¢ Add notes      â”‚â”‚
                                          â”‚ [Save Changes] â”€â”€â”¤â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                              â†“                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Step 5: Final Summary & Confirmation                      â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ FINAL TREATMENT PLAN SUMMARY                         â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Patient: [Name], [Age]                               â”‚ â”‚â”‚
â”‚  â”‚ Date: [Current Date]                                 â”‚ â”‚â”‚
â”‚  â”‚ Physician: Dr. [Name]                                â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ Diagnosis: [Chief Complaint]                         â”‚ â”‚â”‚
â”‚  â”‚ Risk Level: [Medium] ğŸŸ¡                              â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚â”‚
â”‚  â”‚ MEDICATIONS                                          â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ 1. Amoxicillin 500mg                                 â”‚ â”‚â”‚
â”‚  â”‚    â€¢ 3 times daily for 7 days                        â”‚ â”‚â”‚
â”‚  â”‚    â€¢ Take with food                                  â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ 2. [Additional medications...]                       â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚â”‚
â”‚  â”‚ WARNINGS & PRECAUTIONS                               â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Monitor for allergic reactions                     â”‚ â”‚â”‚
â”‚  â”‚ â€¢ Avoid alcohol during treatment                     â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ â˜ I have reviewed all recommendations                â”‚ â”‚â”‚
â”‚  â”‚ â˜ I have considered drug interactions                â”‚ â”‚â”‚
â”‚  â”‚ â˜ I accept responsibility for this treatment plan    â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚ [Print] [Export PDF]                                 â”‚ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚                                                             â”‚â”‚
â”‚  [Back to Review] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [Finalize Plan] â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                               â”‚
                              â†“                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Success Confirmation                                       â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  âœ… Treatment Plan Approved Successfully             â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚  Treatment plan has been saved to patient record.    â”‚ â”‚â”‚
â”‚  â”‚                                                       â”‚ â”‚â”‚
â”‚  â”‚  [View Plan] [Back to Dashboard] [New Patient] â”€â”€â”€â”€â”€â”€â”¼â”€â”˜â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Alternative Flow: Reject Treatment Plan

```
Step 4: Review AI Recommendations
              â†“
      [Reject Plan] clicked
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rejection Confirmation Dialog       â”‚
â”‚                                     â”‚
â”‚ Are you sure you want to reject     â”‚
â”‚ this treatment plan?                â”‚
â”‚                                     â”‚
â”‚ Reason (optional):                  â”‚
â”‚ [________________________________]  â”‚
â”‚                                     â”‚
â”‚ [Cancel] [Confirm Rejection] â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Treatment plan rejected and saved   â”‚
â”‚ with status: "Rejected"             â”‚
â”‚                                     â”‚
â”‚ [Start New Plan] [Back to Dashboard]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Alternative Flow: System Error During AI Generation

```
Step 3: AI Analysis
              â†“
    API call fails / timeout
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error State                         â”‚
â”‚                                     â”‚
â”‚ âš ï¸  We couldn't generate             â”‚
â”‚    recommendations                   â”‚
â”‚                                     â”‚
â”‚ The AI service is temporarily       â”‚
â”‚ unavailable. Your patient data      â”‚
â”‚ has been saved.                     â”‚
â”‚                                     â”‚
â”‚ [Try Again] [Save Draft] [Cancel]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
   [Try Again] â†’ Retry API call
   [Save Draft] â†’ Save progress, return to dashboard
   [Cancel] â†’ Discard progress, return to dashboard
```

### 5.4 User Flow: View Past Treatment Plans

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Doctor Dashboard                    â”‚
â”‚ [View Patients] clicked             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Patient List                        â”‚
â”‚                                     â”‚
â”‚ ğŸ” Search: [_________________]      â”‚
â”‚                                     â”‚
â”‚ â€¢ Patient A, 45y, Last: 2 days ago  â”‚
â”‚ â€¢ Patient B, 32y, Last: 1 week ago  â”‚
â”‚ â€¢ Patient C, 58y, Last: 2 weeks ago â”‚
â”‚                                     â”‚
â”‚ [Click patient] â†’                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Patient Details: Patient A          â”‚
â”‚                                     â”‚
â”‚ Demographics: [info]                â”‚
â”‚ Medical History: [info]             â”‚
â”‚                                     â”‚
â”‚ TREATMENT PLANS                     â”‚
â”‚ â€¢ Plan #3 - 2 days ago [Medium] ğŸŸ¡  â”‚
â”‚   Diagnosis: Upper Respiratory...   â”‚
â”‚   [View Details]                    â”‚
â”‚                                     â”‚
â”‚ â€¢ Plan #2 - 3 months ago [Low] ğŸŸ¢   â”‚
â”‚   Diagnosis: Annual checkup         â”‚
â”‚   [View Details]                    â”‚
â”‚                                     â”‚
â”‚ [+ Create New Treatment Plan] â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
      [View Details] clicked
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Treatment Plan Details              â”‚
â”‚                                     â”‚
â”‚ Date: [date]                        â”‚
â”‚ Physician: Dr. [name]               â”‚
â”‚ Risk Level: [Medium] ğŸŸ¡             â”‚
â”‚                                     â”‚
â”‚ Diagnosis: [complaint]              â”‚
â”‚                                     â”‚
â”‚ Medications:                        â”‚
â”‚ â€¢ [medication list with details]    â”‚
â”‚                                     â”‚
â”‚ Warnings: [if any]                  â”‚
â”‚                                     â”‚
â”‚ [Print] [Export] [Back] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 User Flow: First-Time User Onboarding

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Landing Page (Public)               â”‚
â”‚                                     â”‚
â”‚ [Sign Up] clicked                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Registration Form                   â”‚
â”‚                                     â”‚
â”‚ Full Name: [___________________]    â”‚
â”‚ Email: [________________________]   â”‚
â”‚ Password: [_____________________]   â”‚
â”‚ Confirm: [______________________]   â”‚
â”‚                                     â”‚
â”‚ â˜ I agree to Terms of Service       â”‚
â”‚                                     â”‚
â”‚ [Create Account] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email Verification Sent             â”‚
â”‚                                     â”‚
â”‚ âœ‰ï¸  Check your email                 â”‚
â”‚                                     â”‚
â”‚ We've sent a verification link to:  â”‚
â”‚ [email@example.com]                 â”‚
â”‚                                     â”‚
â”‚ Click the link to activate your     â”‚
â”‚ account.                            â”‚
â”‚                                     â”‚
â”‚ [Resend Email] [Back to Login] â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    User clicks email link
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email Verified Success              â”‚
â”‚                                     â”‚
â”‚ âœ… Your account is now active!       â”‚
â”‚                                     â”‚
â”‚ [Continue to Dashboard] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome Screen (First Login)        â”‚
â”‚                                     â”‚
â”‚ ğŸ‘‹ Welcome, Dr. [Name]!              â”‚
â”‚                                     â”‚
â”‚ Get started with your first patient â”‚
â”‚                                     â”‚
â”‚ Quick Tour:                         â”‚
â”‚ 1. Create a patient record          â”‚
â”‚ 2. Input patient symptoms           â”‚
â”‚ 3. Get AI treatment recommendations â”‚
â”‚ 4. Review and approve plan          â”‚
â”‚                                     â”‚
â”‚ [Skip Tour] [Start Tour] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
      [Start Tour] â†’ Guided walkthrough
      [Skip Tour] â†’ Dashboard
```

---

## 6. High-Level Architectural Plan

### 6.1 System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PRESENTATION LAYER                        â”‚
â”‚                        (Next.js 16 App Router)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Landing    â”‚  â”‚    Auth      â”‚  â”‚  Dashboard   â”‚         â”‚
â”‚  â”‚   Page       â”‚  â”‚    Pages     â”‚  â”‚    Page      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Patient    â”‚  â”‚   Treatment   â”‚  â”‚   Profile    â”‚         â”‚
â”‚  â”‚     List     â”‚  â”‚    Wizard     â”‚  â”‚    Page      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  Components: shadcn/ui, Custom React Components                 â”‚
â”‚  State: Zustand (client state), React hooks                     â”‚
â”‚  Styling: Tailwind CSS 4                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           HOOKS LAYER                            â”‚
â”‚                    (Custom React Hooks)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Data Fetching:                   Mutations:                    â”‚
â”‚  â€¢ usePatients()                  â€¢ useCreatePatient()          â”‚
â”‚  â€¢ usePatient(id)                 â€¢ useUpdatePatient()          â”‚
â”‚  â€¢ useTreatmentPlans()            â€¢ useCreateTreatmentPlan()    â”‚
â”‚  â€¢ useTreatmentPlan(id)           â€¢ useApproveTreatmentPlan()   â”‚
â”‚  â€¢ useSession()                   â€¢ useGenerateAI()             â”‚
â”‚                                                                  â”‚
â”‚  Utilities:                                                      â”‚
â”‚  â€¢ useDebounce()                                                â”‚
â”‚  â€¢ useLocalStorage()                                            â”‚
â”‚  â€¢ useFormValidation()                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVICES LAYER                           â”‚
â”‚                    (Business Logic & API Integration)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  PatientService      â”‚  â”‚  TreatmentPlanServiceâ”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ â€¢ getPatients()      â”‚  â”‚ â€¢ createPlan()       â”‚           â”‚
â”‚  â”‚ â€¢ getPatientById()   â”‚  â”‚ â€¢ getPlan()          â”‚           â”‚
â”‚  â”‚ â€¢ createPatient()    â”‚  â”‚ â€¢ updatePlan()       â”‚           â”‚
â”‚  â”‚ â€¢ updatePatient()    â”‚  â”‚ â€¢ approvePlan()      â”‚           â”‚
â”‚  â”‚ â€¢ deletePatient()    â”‚  â”‚ â€¢ rejectPlan()       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚    AIService         â”‚  â”‚  ValidationService   â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ â€¢ generatePlan()     â”‚  â”‚ â€¢ validateIntake()   â”‚           â”‚
â”‚  â”‚ â€¢ analyzeDrugInt...  â”‚  â”‚ â€¢ validatePlan()     â”‚           â”‚
â”‚  â”‚ â€¢ getRiskScore()     â”‚  â”‚ â€¢ checkConstraints() â”‚           â”‚
â”‚  â”‚ â€¢ getAlternatives()  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Data transformation                                          â”‚
â”‚  â€¢ Business rule enforcement                                    â”‚
â”‚  â€¢ API client wrappers                                          â”‚
â”‚  â€¢ Error handling & retry logic                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           API LAYER                              â”‚
â”‚                  (Next.js API Routes / Route Handlers)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Authentication:              Patients:                         â”‚
â”‚  â€¢ POST /api/auth/signup      â€¢ GET    /api/patients            â”‚
â”‚  â€¢ POST /api/auth/signin      â€¢ GET    /api/patients/[id]       â”‚
â”‚  â€¢ POST /api/auth/signout     â€¢ POST   /api/patients            â”‚
â”‚  â€¢ GET  /api/auth/session     â€¢ PATCH  /api/patients/[id]       â”‚
â”‚                               â€¢ DELETE /api/patients/[id]       â”‚
â”‚                                                                  â”‚
â”‚  Treatment Plans:             AI Generation:                    â”‚
â”‚  â€¢ GET  /api/plans            â€¢ POST /api/ai/generate           â”‚
â”‚  â€¢ GET  /api/plans/[id]       â€¢ POST /api/ai/analyze-risks      â”‚
â”‚  â€¢ POST /api/plans            â€¢ POST /api/ai/alternatives       â”‚
â”‚  â€¢ PATCH /api/plans/[id]                                        â”‚
â”‚  â€¢ POST /api/plans/[id]/approve                                 â”‚
â”‚  â€¢ POST /api/plans/[id]/reject                                  â”‚
â”‚                                                                  â”‚
â”‚  Middleware:                                                     â”‚
â”‚  â€¢ Authentication check                                          â”‚
â”‚  â€¢ Authorization (user owns resource)                            â”‚
â”‚  â€¢ Request validation                                            â”‚
â”‚  â€¢ Error handling                                                â”‚
â”‚  â€¢ Logging                                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA ACCESS LAYER                         â”‚
â”‚                         (Prisma ORM)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Prisma Client:                                                 â”‚
â”‚  â€¢ Type-safe database queries                                   â”‚
â”‚  â€¢ Migrations management                                        â”‚
â”‚  â€¢ Schema management                                            â”‚
â”‚                                                                  â”‚
â”‚  Models:                                                         â”‚
â”‚  â€¢ User (Doctor)                                                â”‚
â”‚  â€¢ Patient                                                      â”‚
â”‚  â€¢ TreatmentPlan                                                â”‚
â”‚  â€¢ Session (Next-Auth)                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA LAYER                              â”‚
â”‚                    (Supabase PostgreSQL)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Tables:                                                         â”‚
â”‚  â€¢ users                                                         â”‚
â”‚  â€¢ patients                                                      â”‚
â”‚  â€¢ treatment_plans                                               â”‚
â”‚  â€¢ sessions                                                      â”‚
â”‚  â€¢ accounts (Next-Auth)                                          â”‚
â”‚  â€¢ verification_tokens (Next-Auth)                               â”‚
â”‚                                                                  â”‚
â”‚  Features:                                                       â”‚
â”‚  â€¢ Row-level security                                            â”‚
â”‚  â€¢ Automated backups                                             â”‚
â”‚  â€¢ Point-in-time recovery                                        â”‚
â”‚  â€¢ Connection pooling                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   OpenAI API         â”‚  â”‚   Google Gemini API  â”‚           â”‚
â”‚  â”‚   (Alternative)      â”‚  â”‚   (Primary)          â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ â€¢ GPT-4 model        â”‚  â”‚ â€¢ Gemini Pro model   â”‚           â”‚
â”‚  â”‚ â€¢ Treatment plans    â”‚  â”‚ â€¢ Treatment plans    â”‚           â”‚
â”‚  â”‚ â€¢ Risk analysis      â”‚  â”‚ â€¢ Risk analysis      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  Note: Configuration via environment variable                    â”‚
â”‚        AI_PROVIDER="openai" | "gemini"                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Database Schema (Prisma)

```prisma
// User (Doctor) Model
model User {
  id            String    @id @default(cuid())
  name          String
  email         String    @unique
  emailVerified DateTime?
  password      String    // Hashed
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  patients      Patient[]
  treatmentPlans TreatmentPlan[]
  sessions      Session[]
  accounts      Account[]
}

// Patient Model
model Patient {
  id                 String   @id @default(cuid())
  doctorId           String
  doctor             User     @relation(fields: [doctorId], references: [id], onDelete: Cascade)
  
  // Demographics
  name               String
  dateOfBirth        DateTime
  gender             Gender
  
  // Medical Information
  medicalHistory     String?
  currentMedications String[] @default([])
  allergies          String[] @default([])
  chronicConditions  String[] @default([])
  
  // Timestamps
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  
  treatmentPlans     TreatmentPlan[]
  
  @@index([doctorId])
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

// Treatment Plan Model
model TreatmentPlan {
  id              String   @id @default(cuid())
  patientId       String
  patient         Patient  @relation(fields: [patientId], references: [id], onDelete: Cascade)
  doctorId        String
  doctor          User     @relation(fields: [doctorId], references: [id], onDelete: Cascade)
  
  // Intake Data (Step 1)
  chiefComplaint      String
  currentSymptoms     String
  vitalSigns          Json?
  physicalExamNotes   String?
  
  // AI Recommendations (Step 2)
  aiRecommendations   Json    // Original AI output
  
  // Final Plan (Step 3/4)
  finalPlan           Json    // Approved or modified plan
  
  // Risk Assessment
  riskLevel           RiskLevel
  riskFactors         String[]
  riskJustification   String
  
  // Drug Interactions
  drugInteractions    Json[]  @default([])
  contraindications   Json[]  @default([])
  
  // Alternatives
  alternatives        Json[]  @default([])
  
  // Status & Workflow
  status              PlanStatus @default(DRAFT)
  wasModified         Boolean    @default(false)
  modificationNotes   String?
  
  // Timestamps
  createdAt           DateTime   @default(now())
  updatedAt           DateTime   @updatedAt
  approvedAt          DateTime?
  
  @@index([patientId])
  @@index([doctorId])
  @@index([status])
  @@index([createdAt])
}

enum RiskLevel {
  LOW
  MEDIUM
  HIGH
}

enum PlanStatus {
  DRAFT
  APPROVED
  REJECTED
}

// Next-Auth Models
model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime
  
  @@unique([identifier, token])
}
```

### 6.3 Technology Stack & Tools

#### Frontend Stack
```typescript
{
  "framework": "Next.js 16 (App Router)",
  "language": "TypeScript 5",
  "ui-library": "React 19",
  "styling": "Tailwind CSS 4",
  "components": "shadcn/ui",
  "icons": "lucide-react",
  "state-management": "Zustand",
  "forms": "React Hook Form",
  "validation": "Zod",
  "date-handling": "date-fns"
}
```

#### Backend Stack
```typescript
{
  "runtime": "Node.js 18+",
  "api": "Next.js API Routes",
  "authentication": "Next-Auth v4",
  "database": "PostgreSQL (Supabase)",
  "orm": "Prisma 6",
  "ai-provider": "OpenAI API or Google Gemini",
  "validation": "Zod"
}
```

#### Development Tools
```typescript
{
  "package-manager": "npm",
  "linter": "ESLint",
  "formatter": "Prettier (via ESLint)",
  "git-hooks": "Husky (optional)",
  "deployment": "Vercel"
}
```

### 6.4 Environment Variables

```bash
# .env.local (not committed to git)

# Database
DATABASE_URL="postgresql://user:password@host:5432/dbname"

# Next-Auth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here"

# AI Provider (choose one)
AI_PROVIDER="openai"  # or "gemini"

# OpenAI (if using)
OPENAI_API_KEY="sk-..."

# Google Gemini (if using)
GEMINI_API_KEY="..."

# Supabase
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Application
NODE_ENV="development"
```

### 6.5 Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel Platform                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Next.js Application                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  Static Pagesâ”‚  â”‚  Server Components   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  (Edge CDN)  â”‚  â”‚  (Serverless         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚   Functions)         â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚         API Routes                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  (Serverless Functions - Edge Runtime)  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  Features:                                               â”‚
â”‚  â€¢ Automatic HTTPS                                       â”‚
â”‚  â€¢ CDN distribution                                      â”‚
â”‚  â€¢ Automatic scaling                                     â”‚
â”‚  â€¢ Preview deployments (per branch)                      â”‚
â”‚  â€¢ Environment variable management                       â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Supabase (Database + Auth)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â€¢ PostgreSQL database                                   â”‚
â”‚  â€¢ Connection pooling                                    â”‚
â”‚  â€¢ Automated backups                                     â”‚
â”‚  â€¢ Row-level security                                    â”‚
â”‚  â€¢ Realtime capabilities (future)                        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              External AI Services                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  OpenAI API  or  Google Gemini API                      â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.6 Security Considerations

#### Authentication & Authorization
```typescript
// Middleware for protected routes
// middleware.ts
export { default } from "next-auth/middleware"

export const config = {
  matcher: [
    "/dashboard/:path*",
    "/patients/:path*",
    "/treatment-plans/:path*",
    "/api/patients/:path*",
    "/api/plans/:path*"
  ]
}

// API route authorization
// app/api/patients/[id]/route.ts
export async function GET(req: Request, { params }) {
  const session = await getServerSession(authOptions);
  
  if (!session) {
    return new Response("Unauthorized", { status: 401 });
  }
  
  const patient = await prisma.patient.findUnique({
    where: { id: params.id }
  });
  
  // Verify user owns this patient
  if (patient.doctorId !== session.user.id) {
    return new Response("Forbidden", { status: 403 });
  }
  
  return Response.json(patient);
}
```

#### Data Encryption
- HTTPS/TLS for all connections
- Database encryption at rest (Supabase default)
- Password hashing with bcrypt/argon2
- Encrypted environment variables

#### API Security
- Rate limiting on authentication endpoints
- Request validation with Zod
- CSRF protection (Next.js default)
- No sensitive data in client-side code
- API keys server-side only

#### Database Security
- Row-level security policies
- Parameterized queries (Prisma)
- Connection pooling
- Regular backups

### 6.7 Performance Optimization Strategy

#### Frontend
- Server components by default (React 19 + Next.js 16)
- Client components only when needed (interactivity)
- Image optimization with Next.js Image
- Font optimization with next/font
- Code splitting (automatic with Next.js)
- Lazy loading for non-critical components

#### Backend
- API response caching (where appropriate)
- Database query optimization (indexes)
- Connection pooling (Supabase)
- Serverless edge functions (low latency)

#### AI API Calls
- Streaming responses (if supported)
- Timeout handling (10s limit)
- Retry logic with exponential backoff
- Fallback error messages

---

## 7. MVP Development Roadmap

### Phase 1: Foundation (Week 1)
**Goal**: Set up development environment and basic architecture

#### Tasks:
- [ ] Initialize Next.js 16 project with TypeScript
- [ ] Configure Tailwind CSS 4
- [ ] Install and configure shadcn/ui
- [ ] Set up Prisma with Supabase
- [ ] Create database schema
- [ ] Run initial migrations
- [ ] Set up environment variables
- [ ] Create basic folder structure (four-layer architecture)
- [ ] Set up Next-Auth with email/password
- [ ] Create authentication pages (sign up, sign in)

**Deliverables**:
- âœ… Running Next.js app
- âœ… Database connected
- âœ… Authentication working
- âœ… Basic layout and navigation

---

### Phase 2: Core Features - Part 1 (Week 2)
**Goal**: Patient management and basic UI

#### Tasks:
- [ ] Create Patient model and API routes
- [ ] Build patient creation form
- [ ] Build patient list page
- [ ] Build patient details page
- [ ] Implement search functionality
- [ ] Create dashboard page
- [ ] Build navigation components
- [ ] Implement basic error handling
- [ ] Add loading states

**Deliverables**:
- âœ… Doctors can create and view patients
- âœ… Dashboard shows patient overview
- âœ… Navigation works smoothly

---

### Phase 3: Core Features - Part 2 (Week 3)
**Goal**: Treatment plan wizard (Steps 1-2)

#### Tasks:
- [ ] Create TreatmentPlan model and API routes
- [ ] Build wizard layout with progress indicator
- [ ] Build Step 1: Patient selection and intake form
- [ ] Implement form validation (Zod + React Hook Form)
- [ ] Build Step 2: AI analysis loading state
- [ ] Integrate OpenAI API or Gemini API
- [ ] Create AI service with prompt engineering
- [ ] Parse and structure AI responses
- [ ] Implement error handling for AI failures
- [ ] Add retry logic for API calls

**Deliverables**:
- âœ… Wizard steps 1-2 functional
- âœ… AI generates treatment recommendations
- âœ… Structured JSON response parsed correctly

---

### Phase 4: Core Features - Part 3 (Week 4)
**Goal**: Treatment plan wizard (Steps 3-4) and approval

#### Tasks:
- [ ] Build Step 3: Review recommendations UI
- [ ] Implement risk-first display (alerts for high risk)
- [ ] Create editable medication cards
- [ ] Build alternative treatment options display
- [ ] Implement inline editing functionality
- [ ] Build Step 4: Final summary page
- [ ] Create approval/rejection workflow
- [ ] Implement treatment plan save functionality
- [ ] Create success confirmation page
- [ ] Add print/export functionality (basic)

**Deliverables**:
- âœ… Complete wizard flow functional
- âœ… Doctors can approve/modify/reject plans
- âœ… Treatment plans saved to database

---

### Phase 5: Polish & Testing (Week 5)
**Goal**: UI/UX refinement and bug fixes

#### Tasks:
- [ ] Refine UI components for consistency
- [ ] Implement smooth transitions and animations
- [ ] Add skeleton loading states
- [ ] Improve error messages
- [ ] Add form validation feedback
- [ ] Implement responsive design for tablets
- [ ] Test all user flows end-to-end
- [ ] Fix bugs and edge cases
- [ ] Optimize performance (Lighthouse audit)
- [ ] Add accessibility improvements
- [ ] Test with real medical use cases (if possible)

**Deliverables**:
- âœ… Polished UI matching design system
- âœ… All core flows working smoothly
- âœ… Responsive on desktop and tablet

---

### Phase 6: Deployment & Documentation (Week 6)
**Goal**: Launch MVP and create documentation

#### Tasks:
- [ ] Set up Vercel deployment
- [ ] Configure production environment variables
- [ ] Set up production database (Supabase)
- [ ] Run database migrations in production
- [ ] Test production deployment
- [ ] Create user documentation (optional for MVP)
- [ ] Create API documentation
- [ ] Set up error monitoring (Sentry or similar)
- [ ] Set up analytics (PostHog or similar)
- [ ] Conduct security review
- [ ] Prepare demo for stakeholders

**Deliverables**:
- âœ… MVP deployed to production
- âœ… Monitoring and analytics in place
- âœ… Documentation complete
- âœ… Ready for user testing

---

## 8. Success Metrics

### MVP Launch Criteria
- [ ] Doctor can complete full workflow (patient â†’ treatment plan â†’ approval) without errors
- [ ] AI generates medically sound recommendations (validated by medical professional)
- [ ] Critical drug interactions are flagged
- [ ] System is secure (authentication, authorization, encryption)
- [ ] UI is intuitive (no training required)
- [ ] Performance meets requirements (page loads < 2s, AI < 10s)
- [ ] Responsive on desktop and tablet

### Post-Launch Metrics (to measure success)
- **User Adoption**: Number of doctors signed up
- **Engagement**: Number of treatment plans created per week
- **Time Savings**: Average time to create treatment plan (target: < 5 min)
- **Modification Rate**: % of AI plans modified vs. approved as-is
- **Error Rate**: Number of bugs/errors reported
- **User Satisfaction**: NPS score or satisfaction rating
- **Safety**: Zero critical medication errors

---

## 9. Future Enhancements (Post-MVP)

### Phase 2 (Months 2-3)
- Advanced drug interaction database integration
- Pattern learning from historical data
- Advanced analytics dashboard
- Bulk operations (multiple patients)
- Export to PDF with professional formatting
- Email notifications for plan approvals

### Phase 3 (Months 4-6)
- Multiple user roles (doctors, nurses, admins)
- Audit trail and compliance reporting
- EHR system integrations (HL7, FHIR)
- Real-time collaboration features
- Mobile application (iOS/Android)
- Advanced search and filtering

### Phase 4 (Months 7-12)
- Machine learning model fine-tuning
- Predictive analytics for complications
- Integration with pharmacy systems
- Telemedicine integration
- Advanced reporting and insights
- Multi-language support
- HIPAA compliance certification

---

## 10. Risk Assessment & Mitigation

### Technical Risks

#### Risk 1: AI API Reliability
- **Impact**: High
- **Probability**: Medium
- **Mitigation**:
  - Implement robust retry logic
  - Set reasonable timeouts
  - Provide fallback error messages
  - Consider caching for common queries
  - Have both OpenAI and Gemini as options

#### Risk 2: Data Security Breach
- **Impact**: Critical
- **Probability**: Low
- **Mitigation**:
  - Follow security best practices
  - Regular security audits
  - Encryption at rest and in transit
  - Row-level security in database
  - Limit access to production data

#### Risk 3: Performance Issues
- **Impact**: Medium
- **Probability**: Low
- **Mitigation**:
  - Use serverless architecture for auto-scaling
  - Implement caching strategies
  - Optimize database queries
  - Monitor performance metrics
  - Load testing before launch

### Product Risks

#### Risk 4: Medical Accuracy
- **Impact**: Critical
- **Probability**: Medium
- **Mitigation**:
  - Clear disclaimer that AI is assistive, not prescriptive
  - Doctor always has final approval
  - Validate with medical professionals
  - Track and learn from modifications
  - Regular audits of recommendations

#### Risk 5: Poor User Adoption
- **Impact**: High
- **Probability**: Medium
- **Mitigation**:
  - Focus on intuitive UX
  - Minimize onboarding friction
  - Provide clear value immediately
  - Gather feedback early and often
  - Iterate based on user feedback

#### Risk 6: Regulatory Compliance
- **Impact**: High
- **Probability**: Low (for MVP)
- **Mitigation**:
  - Research regulations early
  - Consult with legal experts
  - Plan for HIPAA compliance path
  - Document all security measures
  - Be transparent about data handling

---

## 11. Conclusion

This MVP plan provides a clear, actionable roadmap to build a **Simple, Lovable, and Complete** AI-Powered Treatment Plan Assistant in 4-6 weeks. By focusing on the core value propositionâ€”AI-generated treatment recommendations with safety checksâ€”and delivering it through an intuitive wizard interface, we can validate the concept and gather real user feedback.

The architecture is designed to be:
- **Maintainable**: Four-layer architecture with clear separation of concerns
- **Scalable**: Serverless infrastructure that grows with usage
- **Secure**: Industry best practices for handling sensitive medical data
- **Extensible**: Easy to add features post-MVP

**Next Steps**:
1. Review and approve this plan with stakeholders
2. Set up development environment (Week 1)
3. Begin Phase 1 implementation
4. Schedule regular check-ins (weekly)
5. Plan user testing sessions for Week 5

**Remember**: The MVP is about learning and validation. Ship quickly, gather feedback, and iterate. Perfect is the enemy of done.

---

**Document Version**: 1.0  
**Last Updated**: December 5, 2025  
**Author**: Development Team  
**Status**: Ready for Review
